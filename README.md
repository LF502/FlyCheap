# FlyCheap
**Flight Tickets Price Statistics and Analysis**

All folders' names are the data collecting date. A very beginning project :D

# 流程与功能说明
## 数据收集－CtripCrawler

### 特性

- 单线程
- 代理池
- 防丢包
- 忽略集
- 矩阵化
- 定日期
- 带格式

### 缺点

- 爬取慢（一天、一个城市对、所有往返航班：平均用时约3秒，高密度航线不超过8秒）
- 忽略共享航班和有经停的航班

### 输出

- **文件夹**：起始爬取航班日期 / 收集日期
- **文件名**：航线（ ~ 代表双向， - 代表单向）
- **表头**：航班日期、星期、航司、机型、出发到达机场及时刻、价格、折扣

### 爬取计划

- [x] 2022年春节期间、春节后，具有地域代表性的航班数据（2022年1月28日已完成－一次足够）
- [ ] **2022年2月17日以后30日部分客流较高（2019年旅客吞吐量前100名）城市间航班数据（2022年1月21日起开始，作为项目初始数据）**
- [ ] **2022年3月29日以后45日部分客流较高（2019年旅客吞吐量前100名）城市间航班数据（2022年2月12日起开始，提前天数不超过45天）**
- [ ] 项目建模、训练、优化等工作完成后的测试和验证用例

## 数据重构－Rebuilder

### 特性

- 使用 pandas 数据结构
- 加载数据较快
- 处理速度随数据量和数据复杂度变化

### 数据重构功能

#### 数据整合（merge）

- [x] 数据总集，整合所有收集的航班原始信息

#### 总览（overview）

- [x] **航司**：按时刻、航线，总览密度与系数；按起飞机场总览航班数量
- [x] **航线**：按日期、提前天数，总览均值和标准差；按时刻总览密度与系数
- [x] **日期**：按航线，以收集日期或航线日期，总览每日折扣均值

### 附加功能

- 四种数据导入方式
- 整合数据的重复利用

## 数据预处理－Preprocessor

### 折扣影响

——航线距离与机票全价成正比，可通过 价格 / 折扣 换算。在此不研究价格，而是机票折扣。

- 同一日期、同一航线中：航司（包括航司性质和航司间竞争）、时刻影响
- 同一时段、同一航线中：航司（包括航司性质和航司间竞争）、日期（包括星期和节假日）影响
- 同一日期、同一时段中：航司（包括航司性质和航司间竞争）、航线（起飞到达机场）

### 影响因素（按影响程度排序）

#### 航线

- **航线固有性质**：城市间地级、城市地理位置、旅游城市、每日航班量和运营航司
- **航线日期特征**（通过统计分析得出）：票价随日期、周几、提前天数、假期的变化特点，受固有性质影响
- **航线时段特征**（通过统计分析得出）：票价随时段的变化特点，受固有性质、航司竞争影响

#### 日期

- **月份**：距航班起飞一周以外时间，次月票价往往高于本月票价
- **距航班起飞时间**：距航班起飞天数小于7天时，票价通常呈现大幅上涨趋势，包括于航线日期特征
- **星期几**：每周五出现票价小高峰，包括于航线日期特征
- **春节**：春节前后东西向客流差异导致价格变化反常；且除夕、春节期间票价极低，包括于航线日期特征
- **假期**：将寒暑假、短长假（清明、五一、端午、中秋、国庆等）划为假期，所有票价有所上升，包括于航线日期特征

#### 时段

- **起飞时间**：**最早班**（最低） - **早上**（大升） - **中午**（最高） - **下午**（略降） - **晚上**（大降） - **最晚班**（最低）
- **时段密度与竞争**：该航线在本时段上的密度将影响不同航司定价，包括于航线的时段特征

### 其他影响因素

- **机型**：非主导因素，不同机型票价仍主要随航班所在航线、日期、时刻、航司变化，忽略不计
- **航司**：受航线类型与特点、航班时刻及该时刻竞争情况变化，包括于航线的时段特征

#### 结果表达



#### 量化形式



## 其他功能

### 自动化任务（Routine）

- 可实现多机分配范围后同时爬取
- 生成原数据表格后，加入待整合数据集
- 文件分类打包、整合数据集

### 爬取记录（Log）

- 记录终端输出的提示文字及输出时间
- 记录忽略或异常的城市对

# 尚未实现的功能

- [ ] 数学建模实验
- [ ] 机器学习实验
- [ ] 用户UI